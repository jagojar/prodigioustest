$(document).ready(function(){function r(){$.ajax({url:"/prodigious/api/products",type:"GET",dataType:"json",cache:!1,success:function(r){var t=$.parseJSON(r),e=$("#productTrTemplate").html(),a=Handlebars.compile(e),o=a(t);$("#productListTable tr:last").after(o),$("a.edit").click(function(){$("#myModal").modal("toggle");var r=(JSON.stringify($(this).attr("data-json")),$.parseJSON($(this).attr("data-json")));$("#productId").val(r.id),$("#productName").val(r.Name),$("#productNumber").val(r.Number),$("#productPrice").val(r.Price),$("#productPhoto").val(r.PhotoName),$("#operationType").val("updateProduct")})},error:function(r,t,e){alert(t+" : "+e+" - "+r.responseJSON.Message)}})}function t(r){$("#errorProductId").hide();var t=new RegExp(/^\d+$/);""!==$("#searchProductId").val()&&t.test($("#searchProductId").val())?$.ajax({url:"/prodigious/api/singleproduct",type:"GET",dataType:"json",cache:!1,data:{productId:r},success:function(r){var t=$.parseJSON(r),e="";if(void 0!==t.message)e='<span class="label label-info">'+t.message+"</span>";else{var a=$("#singleProductTemplate").html(),o=Handlebars.compile(a),c=o(t);e=c}$("#productSearchResult").html(e)},error:function(r,t,e){alert(t+" : "+e+" - "+r.responseJSON.Message)}}):$("#errorProductId").show()}function e(){if(o()===!0){var t=$("#productName").val(),e=$("#productNumber").val(),a=$("#productPrice").val(),c=$("#productPhoto").val(),d="{ Id: 0, Name: '"+t+"', Number: '"+e+"', Price: "+a+", PhotoName: '"+c+"'}";$.ajax({url:"/prodigious/api/createproduct",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(d),success:function(e){"true"===e&&(alert("Product "+t+" saved successfully!"),$("#productName").val(""),$("#productNumber").val(""),$("#productPrice").val(""),$("#productPhoto").val(""),$("#productListTable tr").not(function(){return!!$(this).has("th").length}).remove(),r(),$("#myModal").modal("toggle"))},error:function(r,t,e){alert(t+" : "+e+" - "+r.responseJSON.Message)}})}}function a(){if(o()===!0){var t=$("#productId").val(),e=$("#productName").val(),a=$("#productNumber").val(),c=$("#productPrice").val(),d=$("#productPhoto").val(),u="{ Id: "+t+" , Name: '"+e+"', Number: '"+a+"', Price: "+c+", PhotoName: '"+d+"'}";$.ajax({url:"/prodigious/api/updateproduct",type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(u),success:function(t){"true"===t&&(alert("Product "+e+" updated successfully!"),$("#productId").val(""),$("#productName").val(""),$("#productNumber").val(""),$("#productPrice").val(""),$("#productPhoto").val(""),$("#productListTable tr").not(function(){return!!$(this).has("th").length}).remove(),r(),$("#myModal").modal("toggle"))},error:function(r,t,e){alert(t+" : "+e+" - "+r.responseJSON.Message)}})}}function o(){return valid=!0,""===$("#productName").val()?($("#errorName").show(),valid=!1):$("#errorName").hide(),""===$("#productNumber").val()?($("#errorNumber").show(),valid=!1):$("#errorNumber").hide(),""===$("#productPrice").val()||isNaN(parseFloat($("#productPrice").val()))?($("#errorPrice").show(),valid=!1):$("#errorPrice").hide(),""===$("#productPhoto").val()?($("#errorPhoto").show(),valid=!1):$("#errorPhoto").hide(),valid}$("#btnNewProduct").click(function(){var r=$("#operationType").val();return"createProduct"===r?void e():"updateProduct"===r?void a():void 0}),$("#myModal").on("hidden.bs.modal",function(){$("#operationType").val("createProduct")}),$("#btnSearchProduct").click(function(){var r=$("#searchProductId").val();t(r)}),$("#Email").blur(function(){""===this.value?$("#Email").get(0).setCustomValidity("Please enter a valid email"):this.setCustomValidity("")}),$("#Password").blur(function(){""===this.value?$("#Password").get(0).setCustomValidity("Please enter the password"):this.setCustomValidity("")}),$("#productId").length>0&&r()});